(this["webpackJsonpreact-ecommerce"]=this["webpackJsonpreact-ecommerce"]||[]).push([[0],{36:function(e,t,n){e.exports=n(52)},45:function(e,t,n){},49:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(11),c=n.n(o),s=n(10),i=n(21),u=n(14),l=(n(45),n(12)),m=n(23),d=n(24),p=n(33),h=n(26),g=n(34),E=n(59),f=n(57),w=n(54),v=n(28),C=n(60),y=n(58),P=n(55),k=n(56),L=n(13),S=n.n(L),O=n(7),b=n.n(O),T=n(9),N=function(e){return fetch("https://cors-anywhere.herokuapp.com/https://nodejs-api-example.herokuapp.com/login",{credentials:"same-origin",method:"POST",body:e,headers:new Headers({"Content-Type":"application/json"})}).then((function(e){return e.text().then((function(e){return"Wrong username and password"===e?{error:e}:{token:e}}))}))},U=function(){return function(){var e=Object(T.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_PRODUCTS_REQUEST"}),e.next=3,x();case 3:r=e.sent,t({type:"GET_PRODUCTS_SUCCESS",list:r.reverse()});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},x=function(){return fetch("https://cors-anywhere.herokuapp.com/https://nodejs-api-example.herokuapp.com/products",{credentials:"same-origin",method:"GET",headers:new Headers({"Content-Type":"application/json"})}).then((function(e){return e.json().then((function(e){return e}))}))},j=function(e,t){return fetch("https://cors-anywhere.herokuapp.com/https://nodejs-api-example.herokuapp.com/product",{credentials:"same-origin",method:"POST",body:t,headers:new Headers({"Content-Type":"application/json",Authorization:e})}).then((function(e){return e.status}))},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return fetch("https://cors-anywhere.herokuapp.com/https://nodejs-api-example.herokuapp.com/product/"+t,{credentials:"same-origin",method:"DELETE",headers:new Headers({"Content-Type":"application/json",Authorization:e})}).then((function(e){return e.status}))},R=function(e,t,n){return console.log(t),console.log(n),fetch("https://cors-anywhere.herokuapp.com/https://nodejs-api-example.herokuapp.com/product/"+n,{credentials:"same-origin",method:"PUT",body:t,headers:new Headers({"Content-Type":"application/json",Authorization:e})}).then((function(e){return e.status}))},_=(n(48),n(49),function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).onShowLoginForm=function(){n.setState((function(e){return{showLoginForm:!e.showLoginForm,username:"",password:""}}))},n.onSubmitLogin=function(){var e=n.state,t=e.username,r=e.password;n.props.adminLogin(t,r),n.setState({username:"",password:""})},n.onLogout=function(){n.setState({showLoginForm:!1,username:"",password:"",showNewProductForm:!1}),n.props.adminLogout()},n.onChangeUsername=function(e){n.setState({username:e.target.value})},n.onChangePassword=function(e){n.setState({password:e.target.value})},n.onShowNewProduct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(S.a.isEmpty(e))n.setState((function(e){return{showNewProductForm:!e.showNewProductForm,name:"",desc:"",price:"",image:"",status:!0,isUpdate:!1,selectID:""}}));else{var r=e.name,a=e.desc,o=e.price,c=e.image,s=e.status;n.setState((function(e){return{showNewProductForm:!e.showNewProductForm,name:r,desc:a,price:o,image:c,status:s,isUpdate:!0,selectID:t}}))}},n.onDeleteProduct=function(e){n.props.deleteProduct(e)},n.onChangeText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(e.target.value);var r=e.target.value;n.setState(Object(l.a)({},t,r))},n.onChangeCheck=function(e){var t=e.target.checked;n.setState({status:t})},n.onSubmitNewProduct=function(){var e=n.state,t=e.name,r=e.desc,a=e.price,o=e.image,c=e.status,s=e.isUpdate,i=e.selectID,u={name:t,desc:r,image:o,price:a,status:c};s?n.props.updateProduct(u,i):n.props.createProduct(u)},n.renderNewProduct=function(){return a.a.createElement("div",{className:"NewProductForm"},a.a.createElement(E.a,null,a.a.createElement(E.a.Header,null,"Administrator Login"),a.a.createElement(f.a,null,a.a.createElement("div",{id:"productForm"},a.a.createElement(f.a.Group,{as:w.a,controlId:"formPlaintextEmail"},a.a.createElement(f.a.Label,{column:!0,sm:"3"},"Name"),a.a.createElement(v.a,{sm:"9"},a.a.createElement(f.a.Control,{type:"text",placeholder:"",value:n.state.name,onChange:function(e){return n.onChangeText(e,"name")}}))),a.a.createElement(f.a.Group,{as:w.a,controlId:"formPlaintextPassword"},a.a.createElement(f.a.Label,{column:!0,sm:"3"},"Description"),a.a.createElement(v.a,{sm:"9"},a.a.createElement(f.a.Control,{as:"textarea",rows:"3",value:n.state.desc,onChange:function(e){return n.onChangeText(e,"desc")}}))),a.a.createElement(f.a.Group,{as:w.a,controlId:"formPlaintextEmail"},a.a.createElement(f.a.Label,{column:!0,sm:"3"},"Price"),a.a.createElement(v.a,{sm:"9"},a.a.createElement(f.a.Control,{type:"text",placeholder:"",value:n.state.price,onChange:function(e){return n.onChangeText(e,"price")}}))),a.a.createElement(f.a.Group,{as:w.a,controlId:"formPlaintextEmail"},a.a.createElement(f.a.Label,{column:!0,sm:"3"},"Image url"),a.a.createElement(v.a,{sm:"9"},a.a.createElement(f.a.Control,{type:"text",placeholder:"",value:n.state.image,onChange:function(e){return n.onChangeText(e,"image")}}))),a.a.createElement(f.a.Group,{as:w.a,controlId:"formPlaintextEmail"},a.a.createElement(f.a.Label,{column:!0,sm:"3"},"Status"),a.a.createElement(v.a,{sm:"9"},a.a.createElement(f.a.Check,{type:"checkbox",label:"Available",checked:n.state.status,onChange:n.onChangeCheck}))),a.a.createElement(C.a,{variant:"success",onClick:n.onSubmitNewProduct,style:{margin:20}},"Save"),a.a.createElement(C.a,{variant:"primary",onClick:n.onShowNewProduct,style:{margin:20}},"Cancel")))))},n.renderLogin=function(){return a.a.createElement("div",{className:"LoginForm"},a.a.createElement(E.a,null,a.a.createElement(E.a.Header,null,"Administrator Login"),a.a.createElement(y.a,{variant:"flush",style:{padding:10}},a.a.createElement(f.a,null,a.a.createElement(f.a.Group,{controlId:"formBasicUsername"},a.a.createElement(f.a.Control,{placeholder:"Username",value:n.state.username,onChange:n.onChangeUsername})),a.a.createElement(f.a.Group,{controlId:"formBasicPassword"},a.a.createElement(f.a.Control,{type:"password",placeholder:"Password",value:n.state.password,onChange:n.onChangePassword})),n.props.error&&a.a.createElement("p",{id:"errorMessage"},n.props.error),a.a.createElement(C.a,{variant:"success",onClick:n.onSubmitLogin,style:{margin:20}},"Login"),a.a.createElement(C.a,{variant:"primary",onClick:n.onShowLoginForm,style:{margin:20}},"Close")))))},n.renderProductsList=function(){return a.a.createElement("div",{className:"renderProductsList"},n.props.productsList.map(n.renderProduct))},n.renderProduct=function(e,t){var r=e._id,o=e.name,c=e.desc,s=e.image,i=e.price,u=e.status,l=null!==n.props.token,m=i&&""!==i?i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"";return a.a.createElement(E.a,{key:r,style:{maxWidth:700}},a.a.createElement(w.a,null,a.a.createElement(v.a,{md:5},""!==s?a.a.createElement(P.a,{id:"productImage",style:{width:240,height:180,margin:10,backgroundColor:"silver"},src:s,rounded:!0}):a.a.createElement("div",{style:{width:240,height:180,margin:10,backgroundColor:"silver",borderRadius:4}})),a.a.createElement(v.a,{style:{padding:20}},a.a.createElement(w.a,null,a.a.createElement("h3",null,o)),a.a.createElement(w.a,null,a.a.createElement("p",{style:{maxWidth:360,overflow:"hidden",textOverflow:"ellipsis"}},c)),a.a.createElement(w.a,null,a.a.createElement(v.a,null,a.a.createElement("p",{style:{color:"#FF7733"}},"Price: ",m)),a.a.createElement(v.a,null,a.a.createElement("p",{style:{color:u?"#7EDF46":"#F7E833"}},"Product is ",u?"Available":"Unavailable"))),l&&a.a.createElement(w.a,null,a.a.createElement(C.a,{variant:"warning",onClick:function(){return n.onShowNewProduct(e,r)},style:{margin:20}},"Update Product"),a.a.createElement(C.a,{variant:"danger",onClick:function(){return n.onDeleteProduct(r)},style:{margin:20}},"Delete Product")))))},n.renderAdminButton=function(){var e,t;return n.state.showLoginForm||n.state.showNewProductForm||(e=null===n.props.token?a.a.createElement(C.a,{id:"loginBtn",variant:"primary",onClick:n.onShowLoginForm},"Admin Login"):a.a.createElement(C.a,{id:"loginBtn",variant:"danger",onClick:n.onLogout},"Logout")),n.state.showNewProductForm||null===n.props.token||(t=a.a.createElement(C.a,{id:"createBtn",variant:"success",onClick:n.onShowNewProduct},"New Product")),a.a.createElement("div",null,t,e)},n.renderLoading=function(){return a.a.createElement("div",{className:"Loading"},a.a.createElement(k.a,{animation:"border",variant:"primary"}))},n.state={showLoginForm:!1,username:"",password:"",showNewProductForm:!1,name:"",desc:"",price:"",image:"",status:!0,isUpdate:!1,selectID:""},n}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.getProductsList()}},{key:"componentDidUpdate",value:function(e,t){null!==this.props.token&&this.props.token!==e.token&&this.setState({showLoginForm:!1}),this.props.productsList.length>0&&!S.a.isEqual(this.props.productsList,e.productsList)&&this.setState({showLoginForm:!1,username:"",password:"",showNewProductForm:!1,name:"",desc:"",price:"",image:"",status:!0,isUpdate:!1,selectID:""})}},{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"Header"},a.a.createElement("h1",null,"Simple eCommerce")),a.a.createElement("div",{className:"Content"},this.renderAdminButton(),this.state.showLoginForm&&this.renderLogin(),this.state.showNewProductForm&&this.renderNewProduct(),!this.state.showLoginForm&&!this.state.showNewProductForm&&this.renderProductsList()),this.props.loading&&this.renderLoading())}}]),t}(r.Component)),D={adminLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(){var n=Object(T.a)(b.a.mark((function n(r){var a,o,c,s;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"LOGIN_REQUEST"}),a=JSON.stringify({username:e,password:t}),n.next=4,N(a);case 4:o=n.sent,c=o.error?o.error:"",s=o.token?o.token:"",r(""!==s?{type:"LOGIN_SUCCESS",token:s}:{type:"LOGIN_FAILURE",error:c});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},adminLogout:function(){return function(e){e({type:"LOGIN_CLEAR"})}},getProductsList:U,createProduct:function(e){return function(){var t=Object(T.a)(b.a.mark((function t(n,r){var a,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"CREATE_PRODUCT_REQUEST"}),t.next=3,r().token;case 3:return a=t.sent,o=JSON.stringify(e),t.next=7,j(a,o);case 7:201===t.sent?(n({type:"CREATE_PRODUCT_SUCCESS"}),n(U())):n({type:"CREATE_PRODUCT_FAILURE",error:"Can not creat new product"});case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},deleteProduct:function(e){return function(){var t=Object(T.a)(b.a.mark((function t(n,r){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r().token;case 2:return a=t.sent,t.next=5,F(a,e);case 5:204===t.sent&&n(U());case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},updateProduct:function(e,t){return function(){var n=Object(T.a)(b.a.mark((function n(r,a){var o,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a().token;case 2:return o=n.sent,c=JSON.stringify(e),n.next=6,R(o,c,t);case 6:200===n.sent&&r(U());case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}},I=Object(u.b)((function(e,t){return{loading:e.loading,productsList:e.products,error:e.error,token:e.token}}),D)(_);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B={loading:!1,products:[],error:null,token:null},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":return G({},e,{loading:!0,error:B.error,token:B.token});case"LOGIN_SUCCESS":return G({},e,{loading:!1,token:t.token,error:B.error});case"LOGIN_FAILURE":return G({},e,{loading:!1,token:B.token,error:t.error});case"LOGIN_CLEAR":return G({},e,{loading:B.loading,token:B.token,error:t.error});case"GET_PRODUCTS_REQUEST":return G({},e,{loading:!0});case"GET_PRODUCTS_SUCCESS":return G({},e,{loading:!1,products:t.list});case"CREATE_PRODUCT_REQUEST":return G({},e,{loading:!0});case"CREATE_PRODUCT_SUCCESS":return G({},e,{loading:!1});case"CREATE_PRODUCT_FAILURE":return G({},e,{error:t.error,loading:!1});default:return e}},Q=Object(s.c)(H,Object(s.a)(i.a)),J=a.a.createElement(u.a,{store:Q},a.a.createElement(I,null));c.a.render(J,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[36,1,2]]]);
//# sourceMappingURL=main.df6da36f.chunk.js.map